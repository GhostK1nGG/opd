{% extends "base.html" %}
{% set page_title = title %}
{% set page_subtitle = subtitle %}
{% block content %}
<div style="display:flex; justify-content:space-between; align-items:center; gap: 12px; margin-bottom: 16px;">
  <div>
    <div style="font-size: 18px; font-weight: 700;">{{ title }}</div>
    {% if subtitle %}<div style="font-size: 13px; color: var(--text-secondary);">{{ subtitle }}</div>{% endif %}
  </div>
  <a class="btn btn-primary" style="width:auto; padding: 10px 14px;" href="{{ create_url }}">
    <i class="fa-solid fa-plus"></i> Добавить
  </a>
</div>

<div class="card">
  <div class="table-wrap">
    <table>
      <thead>
        <tr>
          {% for h in headers %}<th>{{ h }}</th>{% endfor %}
          <th style="text-align:right;">Действия</th>
        </tr>
      </thead>
      <tbody>
        {% for r in rows %}
          <tr>
            {% for c in r.cells %}
              <td>{{ c|safe }}</td>
            {% endfor %}
            <td style="text-align:right;">
              <a class="icon-btn" href="{{ r.edit_url }}" title="Редактировать"><i class="fa-solid fa-pen"></i></a>
              <form method="post" action="{{ r.delete_url }}" style="display:inline;" onsubmit="return confirm('Удалить запись?');">
                <button class="icon-btn" type="submit" title="Удалить" style="border:none;"><i class="fa-solid fa-trash"></i></button>
              </form>
            </td>
          </tr>
        {% else %}
          <tr><td colspan="{{ headers|length + 1 }}" style="color: var(--text-secondary); padding: 18px;">Нет данных</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
